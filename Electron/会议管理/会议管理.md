本文介绍如何通过网易会议组件管理会议的相关示例。

## 前提条件

根据本文操作前，请确保您已经完成了 [登录鉴权](https://doc.yunxin.163.com/meeting/guide/DUxNjQzNDA?platform=electron)。

## 离开或结束会议

您可以调用 [`leaveCurrentMeeting`](https://doc.yunxin.163.com/meetingkit/references/web/typedoc/Latest/zh/electron/interfaces/NEMeetingService.html#leaveCurrentMeeting) 离开当前进行中的会议，并通过参数控制（`leaveMeetingType`）是否同时结束当前会议。

```TypeScript
import NEMeetingKit from "nemeeting-electron-sdk";

const neMeetingKit = NEMeetingKit.getInstance();
const meetingService = neMeetingKit.getMeetingService();
/**
 * leaveMeetingType
 * 0 所有设备离开会议；
 * 1 仅当前设备离开会议(当非多设备入会场景时，调用仅当前设备离开会议等同于离开会议)； 如果退出当前会议后，会议中再无其他成员，则该会议也会结束；(默认值)
 * 2 结束会议(结束会议，仅当前账户是会议主持人/联席主持人时，该参数才有效。当非管理员时候，调用结束会议等同于所有设备离开会议)
 */
meetingService
  .leaveCurrentMeeting(leaveMeetingType)
  .then(() => {
    // 离开或结束会议成功
  })
  .catch((error) => {
    // 离开或结束会议失败
  });
```

## <span id="获取当前会议信息">获取当前会议信息</span>

在已经完成 SDK 登录鉴权的状态下，获取当前会议信息。

调用 [`getCurrentMeetingInfo`](https://doc.yunxin.163.com/meetingkit/references/web/typedoc/Latest/zh/electron/interfaces/NEMeetingService.html#getCurrentMeetingInfo) 方法获取当前会议信息并进行回调处理。该接口的回调结果的数据类型为 [`NEMeetingInfo`](https://doc.yunxin.163.com/meetingkit/references/web/typedoc/Latest/zh/electron/types/NEMeetingInfo.html) 对象类型。

::: note note
请确认已经通过一种入会方式（加入会议/创建会议/匿名入会）加入到会议内，否则回调数据对象为空。
:::

**示例代码如下：**

```TypeScript
import NEMeetingKit from "nemeeting-electron-sdk";

const neMeetingKit = NEMeetingKit.getInstance();
const meetingService = neMeetingKit.getMeetingService();

const { data: meetingInfo } = await meetingService.getCurrentMeetingInfo();
// meetingInfo 当前会议信息
```

## <span id="监听会议状态">监听会议状态</span>

通过注册会议状态回调接口，获取会议状态变更的通知。

1. 注册回调开始监听，并在回调方法中根据您的需求处理相应事件。

    ::: note note
    - 该接口在初始化 SDK 成功后即可调用。
    - 一次会议状态变更回调可能包含多个会议信息的变更。
    :::

    **示例代码如下：**

    ```TypeScript
    const neMeetingKit = NEMeetingKit.getInstance()
    const meetingService = neMeetingKit.getMeetingService()

    const listener = {
        onMeetingStatusChanged: (status) = {
        // 会议状态变更
        }
    }
    meetingService.addMeetingStatusListener(listener)
    ```

2. 反注册回调接口 [`removeMeetingStatusListener`](https://doc.yunxin.163.com/meetingkit/references/web/typedoc/Latest/zh/interfaces/NEMeetingService.html#removeMeetingStatusListener) 停止监听。

    ::: note note
    移除的 listener 必须是和之前 addListener 的相同对象。
    :::

    **示例代码如下：**

    ```TypeScript
    const neMeetingKit = NEMeetingKit.getInstance()
    const meetingService = neMeetingKit.getMeetingService()

    meetingService.removeMeetingStatusListener(listener)
    ```

## <span id="监听成员入会离会">监听成员入会离会</span>

通过注册会议成员监听接口，您可以实时获取会议中成员加入和离开的通知，以便实现自定义的业务逻辑处理。

### 功能说明

- **成员加入通知**：当有成员加入会议时，会触发 `onMemberJoinMeeting` 回调，返回新加入的成员列表。
- **成员离开通知**：当有成员离开会议时，会触发 `onMemberLeaveMeeting` 回调，返回离开的成员列表。
- **批量通知**：一次回调可能包含多个成员的加入或离开信息，SDK 会将同一时间段的成员变化合并通知。

::: note note
- **UI 全托管**：SDK 内部 UI 会自动更新会议成员列表，无需开发者手动处理 UI 更新。SDK 采用 UI 全托管的形式，会议界面中的成员列表、视频画面等 UI 元素都会由 SDK 自动维护和更新。
- **事件用途**：提供成员入会离会事件通知，主要是为了方便开发者实现自定义的业务逻辑，例如：
  - 记录成员进出日志
  - 统计会议参与情况
  - 发送自定义通知消息
  - 触发其他业务操作
- 该接口需要在加入会议后调用才能正常接收成员变化通知。
- 回调中的成员列表可能包含多个成员，建议遍历处理所有成员信息。
- 成员信息包含成员的用户 ID、昵称、角色等详细信息，可用于业务逻辑处理。
:::

### 使用步骤

1. 创建 `NEMeetingListener` 监听器实例，实现成员加入和离开的回调方法。

    **示例代码如下：**

    ```TypeScript
    const meetingListener = {
        onMemberJoinMeeting: (member: NEMeetingMember[]) => {
            // 处理成员加入事件
            // userList 为新加入会议的成员列表
            // 注意：SDK 内部 UI 会自动更新，此处主要用于自定义业务逻辑处理
        },

        onMemberLeaveMeeting: (member: NEMeetingMember[]) => {
            // 处理成员离开事件
            // userList 为离开会议的成员列表
            // 注意：SDK 内部 UI 会自动更新，此处主要用于自定义业务逻辑处理
        }
    };
    ```

2. 注册监听器开始监听成员变化。

    **示例代码如下：**

    ```TypeScript
    NEMeetingKit.getInstance().getMeetingService().addMeetingListener(meetingListener);
    ```

3. 反注册监听器停止监听。

    **示例代码如下：**

    ```TypeScript
    NEMeetingKit.getInstance().getMeetingService().removeMeetingListener(meetingListener);
    ```