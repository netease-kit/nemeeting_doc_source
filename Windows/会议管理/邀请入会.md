网易会议组件（NEMeetingKit）为开发者提供了功能丰富、灵活易用的会议邀请系统。通过这套完整的邀请机制，您可以为用户打造流畅自然的协作体验，让参会者随时随地加入会议，提升沟通效率。本文详细介绍如何在您的应用中实现各类邀请场景。

## 注意事项

- [`NEJoinMeetingParams`](https://doc.yunxin.163.com/docs/interface/meetingkit/windows/doxygen/Latest/zh/class_n_e_join_meeting_params.html) 类中的 `meetingNum` 字段用于指定要加入的会议号。
- [`NEJoinMeetingOptions`](https://doc.yunxin.163.com/docs/interface/meetingkit/windows/doxygen/Latest/zh/class_n_e_join_meeting_options.html) 类提供了丰富的入会配置选项，您可以根据需要开启或关闭会中的各类 UI 和功能开关。
- 实现自定义邀请功能前，请确保您的应用已正确集成网易会议组件。
- 使用组件提供的邀请接口前，确保已完成网易会议组件的 [初始化](https://doc.yunxin.163.com/meeting/guide/zM3MjE2MzM?platform=windows#初始化) 和 [登录鉴权](https://doc.yunxin.163.com/meeting/guide/jU0MTcwNDY?platform=windows)。
- 自定义落地页需要您自行部署和维护。

## 自定义邀请按钮

为了满足不同应用的 UI 需求，网易会议组件允许开发者自定义邀请入口，创造符合品牌调性的会议体验。

### 隐藏内置邀请按钮

当您需要实现自定义的邀请流程时，可以通过 [`NEMeetingOptions.noInvite`](https://doc.yunxin.163.com/docs/interface/meetingkit/windows/doxygen/Latest/zh/class_n_e_meeting_options.html#a58f636c271b53377e4b738a386bdb458) 配置隐藏网易会议组件内置提供的邀请按钮：

```C++
NEJoinMeetingOptions options;
options.noInvite = true; // 设置为 true 时不显示会议中的 "邀请" 按钮
```

### 添加自定义邀请菜单

您可以添加符合自身应用风格的邀请菜单，实现个性化的邀请体验。有关菜单定制的更多详情，请参考 [自定义菜单](https://doc.yunxin.163.com/meeting/guide/TY0ODA5MDM?platform=windows)。以下代码演示如何在 **更多** 中添加一个名为 **通讯录邀请** 的菜单。

```C++
NEMenuItemInfo singleStateItem = {"xx", "自定义单状态"};
m_singleStateMenuItemPtr = std::make_shared<NESingleStateMenuItem>(102, NEMenuVisibility::VISIBLE_ALWAYS, singleStateItem);
fullMoreMenuItems.push_back(m_singleStateMenuItemPtr);

auto joinMeetingOptions = NEJoinMeetingOptions();
joinMeetingOptions.fullMoreMenuItems = fullMoreMenuItems;
joinMeetingOptions.fullToolbarMenuItems = fullToolbarMenuItems;

// 加入会议
m_meetingService->joinMeeting(param, opts, [this](MeetingErrorCode errorCode, const std::string& errorMessage) {});
```

### 监听自定义菜单单击

通过 [`setOnInjectedMenuItemClickListener`](https://doc.yunxin.163.com/docs/interface/meetingkit/windows/doxygen/Latest/zh/class_n_e_meeting_service.html#af00cf8055a7979f60575f0a7309ed9bc) 监听器捕获用户单击 **通讯录邀请** 的按钮事件，实现自定义的通讯录邀请逻辑：

```C++
m_meetingService->addMeetingStatusListener(this);
m_meetingService->setOnInjectedMenuItemClickListener(this);

void MainWindow::onInjectedMenuItemClick(NEMenuClickInfoPtr clickInfoPtr,
    const NEMeetingInfo& meetingInfo) {
}
```

## 邀请方式

在监听到邀请按钮单击后，需要根据自身需求实现自定义的邀请方式。网易会议组件不会限制邀请方式，您可根据业务需求灵活选择。如可通过发送自定义 IM 消息邀请，或调用组件内部邀请服务的接口进行邀请。

## 场景一：发送自定义会议邀请信息

### **发送邀请自定义消息**

如果您的应用已经集成了即时通讯功能（以网易云信 IM 为例），可以利用现有渠道发送自定义的会议邀请消息：

通过网易云信 IM 发送消息时，您可以构建一个包含会议号等信息的 JSON 格式字符串作为附件用于创建一条自定义消息，如 `{"type": "1", "meetingNum": "12345678", "password": "123456"}`。其中 type 为 1 表明该消息为会议邀请消息，meetingNum 为目标会议号，password 为会议密码（如有）。当接收方收到自定义消息后，按照如上的格式进行解析附件，如果能正确解析出 type 和 meetingNum，则可确定该条消息为会议邀请消息。此时可显示对话框提示用户加入会议，用户确认后，直接使用解析出的会议号和密码加入会议。更多详情，请参考 [收发自定义消息](https://doc.yunxin.163.com/messaging2/guide/DYzMjA0Njc?platform=client#%E6%94%B6%E5%8F%91%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B6%88%E6%81%AF)。

### **受邀方加入会议**

受邀用户只需提供会议号和密码，即可快速加入会议（[`joinMeeting`](https://doc.yunxin.163.com/docs/interface/meetingkit/windows/doxygen/Latest/zh/class_n_e_meeting_service.html#ae849568a0375343d8b751dab878f479d)）：

```C++
// 加入会议
void joinMeeting(String meetingNum, String password) {
    NEJoinMeetingParams neJoinMeetingParams = NEJoinMeetingParams();
    params.meetingNum = meetingNum;  // 使用解析出的会议号
    params.password = password;      // 使用解析出的密码
    params.displayName = "用户昵称"; // 用户在会议中显示的名称
    
    auto joinMeetingOptions = NEJoinMeetingOptions();
    options.noAudio = true;  // 入会时不开启音频
    options.noVideo = true;  // 入会时不开启视频
    // 其他配置项...
    
    m_meetingService->joinMeeting(param, opts, [this](MeetingErrorCode errorCode, const std::string& errorMessage) {
        });
}
```

## 场景二：通过网易会议组件接口邀请

网易会议组件提供了内置的邀请服务（[`NEMeetingInviteService`](https://doc.yunxin.163.com/docs/interface/meetingkit/windows/doxygen/Latest/zh/class_n_e_meeting_invite_service.html)），您无需额外开发即可实现高质量的邀请体验。包括邀请联系人、以及监听邀请状态、接受/拒绝邀请。如需接入，欢迎 [提交工单](https://app.yunxin.163.com/global/service/ticket/create) 联系网易云信技术支持工程师开通邀请功能。

### **接收方设置邀请监听器**

在网易会议组件初始化完成后，接收方需要设置邀请监听器（[`addMeetingInviteStatusListener`](https://doc.yunxin.163.com/docs/interface/meetingkit/windows/doxygen/Latest/zh/class_n_e_meeting_invite_service.html#a6248dea4b0fc88e9c189ec13e71e5b24)）才可监听到邀请状态变更事件。

```C++
void MainWindow::onMeetingInviteStatusChanged(NEMeetingInviteStatus status, int meetingId, NEMeetingInviteInfo inviteInfo) {
}

auto service = NEMeetingKit::getInstance()->getMeetingInviteService();
// 添加监听
service->addMeetingInviteStatusListener(this);
// 不需要时移除监听
service->removeMeetingInviteStatusListener(this);
```

### **受邀请方接受邀请或拒绝邀请**

当用户收到会议邀请推送时，可以直接通过接受邀请的方式加入会议（[`acceptInvite`](https://doc.yunxin.163.com/docs/interface/meetingkit/windows/doxygen/Latest/zh/class_n_e_meeting_invite_service.html#a15324a7166d397ffbfeecaa66ede37bc)）：

```C++
NEJoinMeetingParams param = NEJoinMeetingParams();
params.meetingNum = "";
params.password = "");
params.displayName = "网小易";

auto options = NEJoinMeetingOptions();
options.noVideo = false;  // 是否关闭视频
options.noAudio = false;  // 是否关闭音频

service->acceptInvite(param, options, [this](MeetingErrorCode errorCode, const std::string& errorMessage) {
        });
```

用户也可以选择拒绝会议邀请（[`rejectInvite`](https://doc.yunxin.163.com/docs/interface/meetingkit/windows/doxygen/Latest/zh/class_n_e_meeting_invite_service.html#af1ccce84bbfa4ed5b5e74466f51a973d)）：

```C++
service->rejectInvite(id, [this](MeetingErrorCode errorCode, const std::string& errorMessage) {
        });
```

## 场景三：应用外链接邀请

为了打破应用边界，提高邀请的便捷性，可以实现通过链接邀请用户加入会议的功能。

### **自定义邀请落地页**

您可以基于网易云信提供的邀请落地页源码（可以 [提交工单](https://app.yunxin.163.com/global/service/ticket/create) 联系网易云信技术支持工程师获取），打造品牌专属的邀请页面：

落地页通常包含以下内容：

- **会议基本信息（ID、主题、开始时间等）**：您可通过对应的 RESTFul 接口查询会议信息详情进行展示。
- **下载应用或打开应用的按钮**：提供快捷方式让用户安装应用或直接跳转至已安装的应用。
- **会议参与者信息（可选）**：显示当前已加入会议的参会者列表。

如下展示了一个简单的邀请落地页：

<img alt="image.png" src="https://yx-web-nosdn.netease.im/common/bb1bdbdf5568a5fb8867d89124081ae1/image.png" style="width:30%;border: 1px solid #BFBFBF;border-radius:5px;">


## 场景四：特殊设备邀请

网易会议组件通过 [`callOutRoomSystem`](https://doc.yunxin.163.com/docs/interface/meetingkit/windows/doxygen/Latest/zh/class_n_e_meeting_invite_service.html#ad9b0a996a3d1771facb61b603be14a73) 接口支持邀请专业会议室设备加入，实现与其他会议室硬件设备无缝对接：

```C++
NERoomSystemDevice device;
device.protocol = kProtocolTypeIP;
device.address = "192.168.1.100"; // 设备 IP 或地址

auto svc = NEMeetingKit::getInstance()->getMeetingInviteService();
svc->callOutRoomSystem(dev, [cb](MeetingErrorCode ec, const std::string& em, const NERoomSIPCallInfo& info){
        });
```